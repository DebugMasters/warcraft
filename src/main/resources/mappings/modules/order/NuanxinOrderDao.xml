<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.fenghuolun.modules.order.dao.NuanxinOrderDao">
	
	<!-- 查询数据
	<select id="findList" resultType="NuanxinOrder">
		SELECT ${sqlMap.column.toSql()}
		FROM ${sqlMap.table.toSql()}
		<where>
			${sqlMap.where.toSql()}
		</where>
		ORDER BY ${sqlMap.order.toSql()}
	</select> -->
	
	<select id="orderList" resultType="NuanxinOrder">
		SELECT a.*, 
			b.character_realm_zone AS "realmZone", 
			c.realm_name AS "realmName", 
			d.account_name AS "accountName" 
		FROM nuanxin_order a 
		LEFT JOIN nuanxin_character b ON a.character_id = b.character_id 
		LEFT JOIN nuanxin_realm_list c ON b.character_realm = c.realm_id
		LEFT JOIN nuanxin_account d ON b.character_account = d.account_id
		<where>
			<if test="userId != null and userId != ''">
				AND a.user_id = #{userId} 
			</if>
		</where>
	</select>
</mapper>